################################################################################
#
# Script Created by @bensig
# Modified from scripts by http://CryptoLions.io
# For EOS mainnet
# https://github.com/CryptoLions/EOS-MainNet
#
###############################################################################
DATADIR=/opt/eosio/deploy/data 

    if [ -f $DATADIR"/nodeos.pid" ]; then
        pid=$(cat $DATADIR"/nodeos.pid")
        echo $pid
        kill $pid
        rm -r $DATADIR"/nodeos.pid"

        echo -ne "Stopping Nodeos"

        while true; do
            [ ! -d "/proc/$pid/fd" ] && break
            echo -ne "."
            sleep 1
        done
        echo -ne "\rNodeos stopped. \n"

    fi

/opt/eosio/deploy/nodeos --config-dir /opt/eosio/deploy/ --data-dir /opt/eosio/deploy/data/ 2> $DATADIR/stderr.txt &  echo $! > $DATADIR/nodeos.pid